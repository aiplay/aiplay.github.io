<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="/lib/pace/pace-theme-minimal.min.css">
  <script src="/lib/pace/pace.min.js"></script>

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"aiplay.studio","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"hide","padding":18,"offset":15,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":"flat"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":true,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="首先是关于粒子系统的概念，维基百科上是这么描述的：  粒子系统表示三维计算机图形学中模拟一些特定的模糊现象的技术，而这些现象用其它传统的渲染技术难以实现的真实感的游戏图形。经常使用粒子系统模拟的现象有火、爆炸、烟、水流、火花、落叶、云、雾、雪、尘、流星尾迹或者象发光轨迹这样的抽象视觉效果等等。  除过影视行业，CG 特效在游戏领域中也有着广泛的应用，往往用于强化视觉、动作张力的表现，或是丰富一些细">
<meta property="og:type" content="article">
<meta property="og:title" content="粒子系统设计随想">
<meta property="og:url" content="http://aiplay.studio/2022/03/26/2022-03-26-particle-design/index.html">
<meta property="og:site_name" content="爱丸游戏工作室">
<meta property="og:description" content="首先是关于粒子系统的概念，维基百科上是这么描述的：  粒子系统表示三维计算机图形学中模拟一些特定的模糊现象的技术，而这些现象用其它传统的渲染技术难以实现的真实感的游戏图形。经常使用粒子系统模拟的现象有火、爆炸、烟、水流、火花、落叶、云、雾、雪、尘、流星尾迹或者象发光轨迹这样的抽象视觉效果等等。  除过影视行业，CG 特效在游戏领域中也有着广泛的应用，往往用于强化视觉、动作张力的表现，或是丰富一些细">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2022-03-25T16:00:00.000Z">
<meta property="article:modified_time" content="2022-03-26T08:55:57.665Z">
<meta property="article:author" content="xujh">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://aiplay.studio/2022/03/26/2022-03-26-particle-design/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>粒子系统设计随想 | 爱丸游戏工作室</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">爱丸游戏工作室</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://aiplay.studio/2022/03/26/2022-03-26-particle-design/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="xujh">
      <meta itemprop="description" content="爱生活 | 爱丸子">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="爱丸游戏工作室">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          粒子系统设计随想
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2022-03-26 00:00:00 / 修改时间：16:55:57" itemprop="dateCreated datePublished" datetime="2022-03-26T00:00:00+08:00">2022-03-26</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">游戏开发</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span id="busuanzi_value_page_pv"></span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>首先是关于粒子系统的概念，维基百科上是这么描述的：</p>
<blockquote>
<p>粒子系统表示三维计算机图形学中模拟一些特定的模糊现象的技术，而这些现象用其它传统的渲染技术难以实现的真实感的游戏图形。经常使用粒子系统模拟的现象有火、爆炸、烟、水流、火花、落叶、云、雾、雪、尘、流星尾迹或者象发光轨迹这样的抽象视觉效果等等。</p>
</blockquote>
<p>除过影视行业，CG
特效在游戏领域中也有着广泛的应用，往往用于强化视觉、动作张力的表现，或是丰富一些细节处理，使得游戏体验更加细腻。因此，在游戏引擎中，粒子系统往往承担着实现特效效果的重要角色。</p>
<p>早期的粒子系统，设计时通常会提供好各种固定功能的模块，诸如控制粒子的大小、颜色、方向等属性，对于特效设计人员来讲，只要在一个可视化的环境下，调节好各种参数即可。通常根据指责可划分成三个阶段：<strong>发射</strong>、<strong>影响</strong>、<strong>渲染</strong>。所以不管哪个游戏引擎的粒子系统，难免会经常看到诸如<em>Emitter</em>、<em>Renderer</em>等之类的词语。</p>
<span id="more"></span>
<p>如下图所示，一个粒子根据上述三个阶段依次由出生（确定位置、速度、颜色、大小、初始旋转），到接受更新影响（变化参数可以是随机值、曲线等），最后根据渲染设置来重新组织、生成粒子的顶点数据并进行绘制。不同人设计出来的粒子系统可能看起来千差万别，但回归本质不难发现，谁也逃不出这三个步骤。</p>
<figure>
<img
src="https://aiplay-1305529264.cos.ap-shanghai.myqcloud.com/20220212_ParticleSystemDesign/Particle%20Pipeline.png"
alt="基础Particle Pipeline" />
<figcaption aria-hidden="true">基础Particle Pipeline</figcaption>
</figure>
<p>这种模式有点类似早些年图形渲染中的“固定管线”，虽说一定程度上限制了设计人员的发挥，但是针对不同的特效，往往会衍生出固定的“套路”来。更新粒子模型、贴图，再配合上胶水代码（例如Lua脚本）来控制一些动态输入参数以及事件处理，基本上可以满足大部分的效果需求。</p>
<figure>
<img
src="https://aiplay-1305529264.cos.ap-shanghai.myqcloud.com/20220212_ParticleSystemDesign/Module%20Pipeline.png"
alt="ParticleSystem Modules" />
<figcaption aria-hidden="true">ParticleSystem Modules</figcaption>
</figure>
<p>上图展示了一个功能基本完备的粒子系统模块流水线，主要借鉴了Unity中粒子系统的相关Module，笔者也曾在一款基于移动端的自研游戏引擎中，搞过一套功能几乎一样的粒子系统。下图则是Unity中一个ParticleSystem组件的基本Module分布：</p>
<figure>
<img
src="https://aiplay-1305529264.cos.ap-shanghai.myqcloud.com/20220212_ParticleSystemDesign/Unity_ParticleSystem.png"
alt="Unity ParticleSystem Component" />
<figcaption aria-hidden="true">Unity ParticleSystem
Component</figcaption>
</figure>
<p>细致的模块划分，除过行业经验的积累，更主要还是为了<strong>功能解耦</strong>。我们知道，一个特效效果，往往是<strong>调试</strong>出来的，谁也没法准确的设定某个特效的具体参数，也仅仅是凭借脑子里的经验模型来不断试错。如果粒子系统的功能模块过于耦合，在游戏引擎迭代的过程中很难保证向下兼容，之前做的效果又要推倒重来，并且也不利于特效美术建立“经验模型”。</p>
<p>其实早在Unity
5.x时代的粒子系统，每个模块的很多参数支持以及像Lights、Custom
Data这类更高级一些的特性都还没有支持，这都是在引擎版本迭代中慢慢积累起来的。每一次更新，无疑都会解放一部分特效制作人员的思维束缚，以及提高不少的产出效率。</p>
<p>在与不同项目的特效美术同事打交道的过程中，我发现他们大多数都把粒子系统当做一个黑盒来使用（诚然确实也没办法去深刻理解引擎内部的具体实现），即便产生了一些特殊的制作思路，但碍于引擎更新迭代的各种成本，也都退而求其次以另一种方案来进行替代。但相比较于Unity这类商业游戏引擎，自研引擎也有一定的独特优势，就是可以根据项目需求来快速扩展制定出特殊的功能模块，也许并不是通用的最优解决方案，但无疑能提升生产力以匹配项目进度。</p>
<p>这类“固定管线”形式的粒子系统伴随着整个游戏行业繁衍了很长时间，直至UnrealEngine发布了它们的全新粒子系统：<strong>Niagara</strong>。</p>
<p>它采用类似Houdini那样的可视化节点的形式来制作特效，而不是传统的表格形式的参数调配。组织形式上与Unity的ParticleSystem也有一定的区别。</p>
<figure>
<img
src="https://aiplay-1305529264.cos.ap-shanghai.myqcloud.com/20220212_ParticleSystemDesign/NiagaraMain.png"
alt="Niagara编辑主界面" />
<figcaption aria-hidden="true">Niagara编辑主界面</figcaption>
</figure>
<p>如上图，这是NiagaraSystem的主界面，它的混合结构与Unity的ParticleSystem有着不小的差别。这里的NiagaraSystem是一个复合特效效果的集合，它里面由若干个Emitter组成。Niagara的Emitter并不仅仅对标之前所提的发射阶段，也包含了影响阶段和渲染阶段的全部功能。因此，一个Emitter更像是对标Unity中的ParticleSystem组件。在Unity中制作一个特效，往往需要一个树形结构下的多个GameObject分别挂载着不同的ParticleSystem组件组合而成，其中每个ParticleSystem负责发射一类粒子。</p>
<p>其实两者的实现目的都是一致的，但是Niagara的形式更符合美术的思维习惯，也更容易专注于效果的调试与制作，不用再牵扯精力去关心Transform组件或是整体的Node层级结构，全部放到一起，更加地一目了然。</p>
<p>推荐阅读虚幻的官方文档<a
target="_blank" rel="noopener" href="https://docs.unrealengine.com/4.27/zh-CN/RenderingAndGraphics/Niagara/NiagaraKeyConcepts/">《Niagara关键概念》</a>来理解Niagara的相关理念。其中，它的VFX系统目标，个人还是十分赞同的：</p>
<ul>
<li>美术师可全权掌控效果</li>
<li>各轴均可编程、可自定义</li>
<li>提供更好的调试、显示和性能工具</li>
<li>支持来自虚幻引擎4其他部分或外部源的数据</li>
<li>不妨碍用户操作</li>
</ul>
<p>关于Niagara的强大，完全可以再开一篇甚至是多篇文章来详细介绍。这里想要强调的是，它完全实现了功能模块的<strong>可定制化</strong>。鼠标双击Emitter中的任意Item，会跳转到一个新的Niagara
Script窗口，如下图所示：</p>
<figure>
<img
src="https://aiplay-1305529264.cos.ap-shanghai.myqcloud.com/20220212_ParticleSystemDesign/NiagaraModuleGraph.png"
alt="Niagara Script Graph" />
<figcaption aria-hidden="true">Niagara Script Graph</figcaption>
</figure>
<p>类似蓝图的Graph实现了对应Module下的全部功能逻辑，可以称之为Niagara脚本，具体源码实现在UNiagaraScript类中，继承自UObject，并且对应着一种资产。因此美术可以创建自己的<strong>Niagara
Module Script</strong>和<strong>Niagara Function
Script</strong>，灵活地应用于Emitter之中。也就是说，美术终于能够自己独立实现Module的逻辑了，不再受限于程序开发。</p>
<p>对于创造力十足、很有想法的特效美术来说，这无疑是一巨大福音。</p>
<p>但凡事都有两面性，很多时候我们可能并不需要放飞自我、无节制的创造，80%的制作还是离不开那几个老生常谈的参数。为此，Niagara也提供好了很多内置模块，方便大家像之前那样快速、直接地搭建出基础的粒子效果出来。即便这样，<strong>Niagara的学习成本无疑还是大大增加了</strong>。而且对于程序开发人员来讲，很多Module的逻辑通过Graph的形式阅读起来也比较头疼，虽然可以插入Custom
HLSL代码（Niagara
Script本质就是使用HLSL编译模块），但用起来也会有许多坑在里面。</p>
<p>说到这里，Niagara的思路对现代游戏引擎的粒子系统设计还是有着非常多的借鉴意义。它解决了美术制作特效的最大痛点，并能更好地去进行效果调试和性能调优。</p>
<p>归根结底，特效的制作工作流无论怎么完善，粒子系统无论怎么设计，其根本出发点无非就是：<strong>产出效率</strong>与<strong>运行效率</strong>。无论是制作一款3A大作，还是移动平台的休闲游戏，虽然需求形式大相径庭，但也逃不过上述两点。基于这两个出发点，以及以往的经验和一些商业引擎的借鉴，整理了如下一份粒子系统设计的思维导图：</p>
<figure>
<img
src="https://aiplay-1305529264.cos.ap-shanghai.myqcloud.com/20220212_ParticleSystemDesign/ParticleSystemDesign.png"
alt="Particle System Design" />
<figcaption aria-hidden="true">Particle System Design</figcaption>
</figure>
<p>想要为游戏引擎设计出一款好的粒子系统，除了老生常谈的基于SOA架构的DOP模式，支持应对海量粒子模拟的GPU方案，还要包括强大、便利的<strong>数据通信能力</strong>，包括并不仅限于粒子系统内部，游戏引擎的其他模块，甚至于针对外部资产数据的处理和交互。</p>
<p><strong>编辑器的配套支持</strong>也是尤为重要的，毕竟粒子系统的内核设计的再完美，架构再优越，最终也是要给人来用的。抛开一些硬核功能的支持不谈，如果操作过于繁琐甚至于workflow上有些反人类，都会导致它不能被大众所接受。往往使用粒子系统更多的还是美术从业人员，因此从他们的角度、思维习惯来设计十分重要。此外，粒子系统也常常是需要进行性能优化的地方，为了平衡美术与程序在效果与性能之间的根本冲突，完备的<strong>性能调试</strong>辅助工具也是需要的，以数据事实说话节约沟通成本，也有助于系统设计初期暴露出一些隐藏的性能问题。</p>
<p>最后，这篇文章可能有很多不够严谨或是值得商榷的地方，欢迎各路特效大神来指点、交流。
)</p>
<p>想要为游戏引擎设计出一款好的粒子系统，除了老生常谈的基于SOA架构的DOP模式，支持应对海量粒子模拟的GPU方案，还要包括强大、便利的<strong>数据通信能力</strong>，包括并不仅限于粒子系统内部，游戏引擎的其他模块，甚至于针对外部资产数据的处理和交互。</p>
<p><strong>编辑器的配套支持</strong>也是尤为重要的，毕竟粒子系统的内核设计的再完美，架构再优越，最终也是要给人来用的。抛开一些硬核功能的支持不谈，如果操作过于繁琐甚至于workflow上有些反人类，都会导致它不能被大众所接受。往往使用粒子系统更多的还是美术从业人员，因此从他们的角度、思维习惯来设计十分重要。此外，粒子系统也常常是需要进行性能优化的地方，为了平衡美术与程序在效果与性能之间的根本冲突，完备的<strong>性能调试</strong>辅助工具也是需要的，以数据事实说话节约沟通成本，也有助于系统设计初期暴露出一些隐藏的性能问题。</p>
<p>最后，这篇文章可能有很多不够严谨或是值得商榷的地方，欢迎各路特效大神来指点、交流。</p>

    </div>

    
    
    
        <div class="reward-container">
  <div>您的赞赏是我前进的动力</div>
  <button onclick="var qr = document.getElementById('qr'); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';">
    打赏
  </button>
  <div id="qr" style="display: none;">
      
      <div style="display: inline-block;">
        <img src="/images/wechatpay.png" alt="xujh 微信支付">
        <p>微信支付</p>
      </div>

  </div>
</div>

        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>xujh
  </li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="http://aiplay.studio/2022/03/26/2022-03-26-particle-design/" title="粒子系统设计随想">http://aiplay.studio/2022/03/26/2022-03-26-particle-design/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>

        

  <div class="followme">
    <p>欢迎关注我的其它发布渠道</p>

    <div class="social-list">

        <div class="social-item">
          <a target="_blank" class="social-link" href="/images/wechat_channel.jpg">
            <span class="icon">
              <i class="fab fa-weixin"></i>
            </span>

            <span class="label">WeChat</span>
          </a>
        </div>
    </div>
  </div>


      <footer class="post-footer">

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2021/05/07/2021-05-07-dream-reality-gameproducer/" rel="prev" title="爱，死亡，游戏制作人">
      <i class="fa fa-chevron-left"></i> 爱，死亡，游戏制作人
    </a></div>
      <div class="post-nav-item"></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="xujh"
      src="/images/avatar.png">
  <p class="site-author-name" itemprop="name">xujh</p>
  <div class="site-description" itemprop="description">爱生活 | 爱丸子</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">24</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">14</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">16</span>
        <span class="site-state-item-name">标签</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">AIplay Studio</span>
</div>
  <div id="site-runtime">
  <span class="post-meta-item-icon">
    <i class="fa fa-clock-o"></i>
  </span>
  <span id="runtime"></span>
</div>

<script language="javascript">
  function isPC() {
    var userAgentInfo = navigator.userAgent;
    var agents = ["Android", "iPhone", "SymbianOS", "Windows Phone", "iPad", "iPod"];
    for (var i = 0; i < agents.length; i++) {
      if (userAgentInfo.indexOf(agents[i]) > 0) {
        return false;
      }
    }
    return true;
  }

  function siteTime(openOnPC, start) {
    window.setTimeout("siteTime(openOnPC, start)", 1000);
    var seconds = 1000;
    var minutes = seconds * 60;
    var hours = minutes * 60;
    var days = hours * 24;
    var years = days * 365;
      start = new Date("2014-11-23 09:00:00 +0800");
    var now = new Date();
    var year = now.getFullYear();
    var month = now.getMonth() + 1;
    var date = now.getDate();
    var hour = now.getHours();
    var minute = now.getMinutes();
    var second = now.getSeconds();
    var diff = now - start;

    var diffYears = Math.floor(diff / years);
    var diffDays = Math.floor((diff / days) - diffYears * 365);
    var diffHours = Math.floor((diff - (diffYears * 365 + diffDays) * days) / hours);
    var diffMinutes = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours) / minutes);
    var diffSeconds = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours - diffMinutes * minutes) / seconds);

    if (openOnPC) {
      document.getElementById("runtime").innerHTML = "Running: " + diffYears + " years " + diffDays + " days " + diffHours + " hours " + diffMinutes + " mins " + diffSeconds + " secs";
    } else {
      document.getElementById("runtime").innerHTML = "Running: " + diffYears + "y " + diffDays + "d " + diffHours + "h " + diffMinutes + "m " + diffSeconds + "s";
    }
  }

  var showOnMobile = false;
  var openOnPC = isPC();
  var start = new Date();
  siteTime(openOnPC, start);

  if (!openOnPC && !showOnMobile) {
    document.getElementById('site-runtime').style.display = 'none';
  }
</script>


        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script size="300" alpha="0.6" zIndex="-1" src="/lib/canvas-ribbon/canvas-ribbon.js"></script>
  <script src="/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/medium-zoom@1/dist/medium-zoom.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

  

</body>
</html>
